        * { box-sizing: border-box; }
        body { margin: 0; background: #050505; overflow: hidden; font-family: 'Rajdhani', sans-serif; user-select: none; color: #fff; }
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        #bgCanvas { z-index: 1; }
        #charCanvas { z-index: 2; pointer-events: none; }

        /* ============ STATUS BAR - TOP ============ */
        #statusBar {
            position: fixed; top: 0; left: 0; right: 0; z-index: 50;
            padding: max(8px, env(safe-area-inset-top)) 8px 8px 8px;
        }
        #statusBar .bar-inner {
            background: rgba(0,0,0,0.6); backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 12px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 6px 8px; gap: 4px;
        }
        #statusBar .left, #statusBar .center, #statusBar .right {
            display: flex; align-items: center; gap: 4px;
        }
        #statusBar .center { flex: 1; justify-content: center; }
        .status-btn {
            width: 40px; height: 40px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1); color: #ccc; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.15s; -webkit-tap-highlight-color: transparent;
        }
        .status-btn:active { transform: scale(0.95); }
        .status-btn.active { background: #8b5cf6; border-color: #a78bfa; color: white; box-shadow: 0 0 15px rgba(139,92,246,0.4); }
        .status-btn.mic-active { background: #ef4444; border-color: #f87171; color: white; animation: pulse-red 1s infinite; }
        .status-btn.synth-active { background: linear-gradient(135deg, #00ff88, #00ccff); border-color: #00ff88; color: #000; }
        @keyframes pulse-red { 0%, 100% { box-shadow: 0 0 10px rgba(239,68,68,0.5); } 50% { box-shadow: 0 0 20px rgba(239,68,68,0.8); } }
        .status-btn svg { width: 20px; height: 20px; }
        .bpm-display { display: flex; align-items: center; gap: 8px; }
        .bpm-value { font-size: 16px; font-weight: 900; color: #0ff; font-family: monospace; min-width: 40px; }
        .bpm-label { font-size: 9px; color: rgba(255,255,255,0.4); }
        .beat-bars { display: flex; gap: 2px; }
        .beat-bar { width: 20px; height: 4px; background: rgba(255,255,255,0.15); border-radius: 2px; transition: all 0.1s; }
        .beat-bar.active { background: #8b5cf6; box-shadow: 0 0 6px rgba(139,92,246,0.6); }
        .beat-bar.downbeat { background: #0ff; box-shadow: 0 0 6px rgba(0,255,255,0.6); }

        /* ============ FX RAIL - LEFT ============ */
        #fxRail {
            position: fixed; left: 0; top: 50%; transform: translateY(-50%); z-index: 55;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1); border-left: none;
            border-radius: 0 12px 12px 0;
            padding: 8px 6px; display: flex; flex-direction: column; gap: 4px;
        }
        #fxRail.collapsed { padding: 8px 2px; }
        #fxRail.collapsed .fx-btn { width: 8px; padding: 0; }
        .fx-btn {
            width: 44px; height: 36px; border-radius: 8px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.5); cursor: pointer;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: all 0.15s; font-size: 7px; font-weight: 700; gap: 2px;
        }
        .fx-btn:active { transform: scale(0.95); }
        .fx-btn.active { background: linear-gradient(135deg, #8b5cf6, #ec4899); border-color: #a78bfa; color: white; }
        .fx-btn svg { width: 14px; height: 14px; }
        .fx-axis { position: absolute; right: 2px; top: 2px; display: flex; flex-direction: column; gap: 1px; }
        .fx-axis-dot { width: 4px; height: 4px; border-radius: 50%; }
        .fx-axis-dot.x { background: #0ff; box-shadow: 0 0 4px #0ff; }
        .fx-axis-dot.y { background: #f0f; box-shadow: 0 0 4px #f0f; }
        .fx-intensity { margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.1); }
        .fx-intensity-bar { height: 3px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-bottom: 4px; overflow: hidden; }
        .fx-intensity-fill { height: 100%; transition: width 0.1s; }
        .fx-intensity-fill.x { background: #0ff; }
        .fx-intensity-fill.y { background: #f0f; }
        .fx-intensity-label { font-size: 6px; color: rgba(255,255,255,0.4); text-align: center; }

        /* ============ BEZEL DRAWERS - SMART EDGE PANELS ============ */
        .bezel {
            position: fixed; top: 50%; transform: translateY(-50%); z-index: 55;
            display: flex; flex-direction: column; align-items: center;
            padding: 8px 2px; gap: 6px;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(12px);
            transition: all 0.25s ease;
        }
        .bezel-left { left: 0; border-radius: 0 8px 8px 0; border-right: 1px solid rgba(255,255,255,0.1); }
        .bezel-right { right: 0; border-radius: 8px 0 0 8px; border-left: 1px solid rgba(255,255,255,0.1); }

        /* Collapsed state - just status dots */
        .bezel .status-dot {
            width: 8px; height: 8px; border-radius: 50%;
            background: rgba(255,255,255,0.2); transition: all 0.15s;
            cursor: pointer;
        }
        .bezel .status-dot.active { background: #0ff; box-shadow: 0 0 6px #0ff; }
        .bezel .status-dot.active-y { background: #f0f; box-shadow: 0 0 6px #f0f; }
        .bezel .status-dot.active-fx { background: #8b5cf6; box-shadow: 0 0 6px #8b5cf6; }

        .bezel .status-label {
            font-size: 7px; font-weight: 700; color: rgba(255,255,255,0.5);
            writing-mode: vertical-rl; text-orientation: mixed;
            letter-spacing: 1px;
        }
        .bezel .bezel-divider {
            width: 12px; height: 1px; background: rgba(255,255,255,0.15); margin: 4px 0;
        }

        /* Expanded state - full controls */
        .bezel.expanded { padding: 8px 6px; }
        .bezel-left.expanded { width: 70px; }
        .bezel-right.expanded { width: 80px; }

        .bezel .drawer-content { display: none; flex-direction: column; gap: 4px; width: 100%; }
        .bezel.expanded .drawer-content { display: flex; }
        .bezel.expanded .status-dot { display: none; }
        .bezel.expanded .status-label { display: none; }

        .bezel .bezel-btn {
            width: 100%; padding: 6px 4px; border-radius: 6px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.6); cursor: pointer;
            font-size: 8px; font-weight: 700; text-align: center;
            transition: all 0.15s;
        }
        .bezel .bezel-btn:active { transform: scale(0.95); }
        .bezel .bezel-btn.active { background: #8b5cf6; border-color: #a78bfa; color: white; }
        .bezel .bezel-btn.cyan.active { background: #0ff; color: #000; }

        .bezel .bezel-slider {
            width: 100%; height: 4px; -webkit-appearance: none;
            background: rgba(255,255,255,0.15); border-radius: 2px; margin: 4px 0;
        }
        .bezel .bezel-slider::-webkit-slider-thumb {
            -webkit-appearance: none; width: 12px; height: 12px;
            border-radius: 50%; background: #8b5cf6; cursor: pointer;
        }

        /* Mini intensity bars for collapsed state */
        .bezel .mini-bars {
            display: flex; flex-direction: column; gap: 2px; width: 12px;
        }
        .bezel .mini-bar {
            height: 2px; background: rgba(255,255,255,0.1); border-radius: 1px; overflow: hidden;
        }
        .bezel .mini-bar-fill { height: 100%; transition: width 0.1s; }
        .bezel .mini-bar-fill.x { background: #0ff; }
        .bezel .mini-bar-fill.y { background: #f0f; }
        .bezel.expanded .mini-bars { display: none; }

        /* Hide original fxRail when bezels active - we replace it */
        #fxRail { display: none; }

        /* Responsive: on very small screens, bezels auto-collapse */
        @media (max-width: 360px) {
            .bezel { padding: 6px 2px; }
            .bezel.expanded { width: 60px !important; padding: 6px 4px; }
            .bezel .bezel-btn { font-size: 7px; padding: 5px 3px; }
        }

        /* ============ ENGINE STRIP - BOTTOM ============ */
        #engineStrip {
            position: fixed; bottom: 0; left: 0; right: 0; z-index: 50;
            padding: 8px 8px max(8px, env(safe-area-inset-bottom)) 8px;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 70%, transparent 100%);
        }
        #engineStrip .strip-inner {
            display: flex; flex-direction: column; gap: 8px; align-items: center;
        }
        .pattern-row {
            display: flex; gap: 4px; overflow-x: auto; max-width: 100%;
            padding: 4px 0; -webkit-overflow-scrolling: touch;
            scrollbar-width: none; -ms-overflow-style: none;
        }
        .pattern-row::-webkit-scrollbar { display: none; }
        .pattern-btn {
            flex-shrink: 0; padding: 8px 12px; border-radius: 8px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.6); cursor: pointer; font-size: 9px; font-weight: 700;
            transition: all 0.15s; white-space: nowrap;
        }
        .pattern-btn:active { transform: scale(0.95); }
        .pattern-btn.active { background: #8b5cf6; border-color: #a78bfa; color: white; }
        .controls-row {
            display: flex; gap: 8px; align-items: center; justify-content: center;
            flex-wrap: wrap; width: 100%;
        }
        .mode-toggle {
            display: flex; gap: 2px; background: rgba(0,0,0,0.4); border-radius: 8px; padding: 2px;
        }
        .mode-btn {
            padding: 8px 12px; border-radius: 6px; border: none;
            background: transparent; color: rgba(255,255,255,0.5);
            cursor: pointer; font-size: 10px; font-weight: 700; transition: all 0.15s;
        }
        .mode-btn.active { background: #8b5cf6; color: white; }
        .mode-btn.cyan.active { background: #0ff; color: #000; }
        .intensity-slider {
            width: 120px; height: 6px; -webkit-appearance: none; background: rgba(255,255,255,0.1);
            border-radius: 3px; outline: none;
        }
        .intensity-slider::-webkit-slider-thumb {
            -webkit-appearance: none; width: 16px; height: 16px; border-radius: 50%;
            background: #8b5cf6; border: 2px solid white; cursor: pointer;
        }
        .mixer-toggle {
            padding: 10px 16px; border-radius: 10px;
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            color: #ccc; cursor: pointer; font-size: 11px; font-weight: 700;
            display: flex; align-items: center; gap: 6px; transition: all 0.15s;
        }
        .mixer-toggle.active { background: #8b5cf6; border-color: #a78bfa; color: white; }
        .mixer-toggle svg { width: 18px; height: 18px; }

        /* ============ MIXER DRAWER ============ */
        #mixerDrawer {
            position: fixed; bottom: 0; left: 0; right: 0; z-index: 100;
            background: rgba(10,10,15,0.98); backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255,255,255,0.15);
            border-radius: 20px 20px 0 0;
            transform: translateY(100%); transition: transform 0.3s ease;
            max-height: 70vh; overflow-y: auto;
        }
        #mixerDrawer.open { transform: translateY(0); }
        .drawer-handle {
            width: 40px; height: 4px; background: rgba(255,255,255,0.3);
            border-radius: 2px; margin: 12px auto;
        }
        .drawer-content { padding: 0 16px 16px 16px; }
        .drawer-tabs { display: flex; gap: 4px; margin-bottom: 16px; }
        .drawer-tab {
            flex: 1; padding: 10px; border-radius: 8px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.5); cursor: pointer; font-size: 11px; font-weight: 700;
            text-align: center; transition: all 0.15s;
        }
        .drawer-tab.active { background: #8b5cf6; border-color: #a78bfa; color: white; }

        /* ============ LEGACY UI STYLES - Hidden (new UI above) ============ */
        #ui {
            display: none !important; /* Hidden - replaced by StatusBar, FXRail, EngineStrip */
        }
        #ui.hidden { opacity: 0; pointer-events: none; transform: translateY(100%); }
        .ui-row {
            display: flex; gap: 6px; align-items: center; justify-content: center;
            flex-wrap: wrap; max-width: 100%;
        }
        .stream-row { width: 100%; align-items: stretch; }
        .stream-input {
            flex: 1; min-width: 200px; padding: 10px 12px; border-radius: 12px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: white; font-size: 12px; font-family: 'Inter', sans-serif;
        }
        .stream-input::placeholder { color: rgba(255,255,255,0.4); }
        .stream-status { width: 100%; font-size: 10px; color: #a78bfa; text-align: left; margin-top: 4px; }
        button, a.active {
            background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15);
            color: #ccc; padding: 10px 14px; border-radius: 12px;
            cursor: pointer; font-weight: 700; font-size: 11px; font-family: 'Rajdhani', sans-serif;
            letter-spacing: 0.5px; text-transform: uppercase;
            transition: all 0.15s; display: flex; align-items: center; gap: 6px;
            min-width: 44px; min-height: 44px; justify-content: center;
            -webkit-tap-highlight-color: transparent;
        }
        button:active, a.active:active { transform: scale(0.95); }
        button.active, a.active { background: #8b5cf6; border-color: #a78bfa; color: white; box-shadow: 0 0 15px rgba(139,92,246,0.4); }
        button.cyan { background: rgba(0,255,255,0.15); border-color: rgba(0,255,255,0.4); color: #0ff; }
        button.cyan.active { background: #0ff; color: #000; }
        button.orange { background: rgba(255,150,0,0.15); border-color: rgba(255,150,0,0.4); color: #f90; }
        button.red { background: rgba(239,68,68,0.15); border-color: rgba(239,68,68,0.3); color: #fca5a5; }
        button.red.active { background: #ef4444; color: white; border-color: #ef4444; }
        .btn-icon { width: 44px; padding: 10px; }
        .btn-icon svg { width: 20px; height: 20px; }
        .btn-label { display: none; }
        @media (min-width: 480px) { .btn-label { display: inline; } button { padding: 10px 16px; } }
        .separator { width: 1px; height: 20px; background: rgba(255,255,255,0.1); display: none; }
        @media (min-width: 480px) { .separator { display: block; } }

        /* Tap to show UI hint */
        #tapHint {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.7); padding: 16px 24px; border-radius: 12px;
            font-size: 14px; color: rgba(255,255,255,0.6); pointer-events: none;
            opacity: 0; transition: opacity 0.3s; z-index: 80;
        }
        #tapHint.visible { opacity: 1; }

        /* Loader */
        #loader {
            position: absolute; inset: 0; background: #000; z-index: 200;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.5s; pointer-events: none;
        }
        .spinner {
            width: 50px; height: 50px; border: 3px solid rgba(139,92,246,0.3); border-top-color: #8b5cf6;
            border-radius: 50%; animation: spin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite; margin-bottom: 20px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Drag Overlay */
        #dropOverlay {
            position: absolute; inset: 0; z-index: 300; background: rgba(139, 92, 246, 0.9);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            backdrop-filter: blur(10px); opacity: 0; pointer-events: none; transition: opacity 0.2s;
        }
        body.drag-active #dropOverlay { opacity: 1; }
        .drop-title { font-size: 3em; color: white; font-weight: 900; letter-spacing: 4px; margin-bottom: 10px; }

        /* Mic Permission Modal */
        #micModal {
            position: fixed; inset: 0; z-index: 500;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            display: none; align-items: center; justify-content: center;
        }
        #micModal.visible { display: flex; }
        .mic-modal-content {
            background: rgba(20,20,25,0.98); border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px; padding: 24px; max-width: 360px; text-align: center;
        }
        .mic-modal-content h3 { color: #0ff; font-size: 18px; margin: 0 0 12px 0; }
        .mic-modal-content p { color: rgba(255,255,255,0.7); font-size: 13px; margin: 0 0 20px 0; line-height: 1.5; }
        .mic-modal-content .icon { width: 60px; height: 60px; margin: 0 auto 16px; background: rgba(239,68,68,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .mic-modal-content .icon svg { width: 30px; height: 30px; color: #ef4444; }
        .mic-modal-btns { display: flex; gap: 12px; }
        .mic-modal-btn {
            flex: 1; padding: 14px; border-radius: 12px; border: none;
            font-size: 13px; font-weight: 700; cursor: pointer; transition: all 0.15s;
        }
        .mic-modal-btn.primary { background: #ef4444; color: white; }
        .mic-modal-btn.primary:hover { background: #dc2626; }
        .mic-modal-btn.secondary { background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); }
        .mic-modal-btn.synth { background: linear-gradient(135deg, #00ff88, #00ccff); color: #000; }

        /* Help overlay */
        #helpOverlay {
            position: fixed; inset: 0; z-index: 400;
            background: rgba(0,0,0,0.95); backdrop-filter: blur(10px);
            display: none; align-items: center; justify-content: center;
        }
        #helpOverlay.visible { display: flex; }
        .help-content {
            background: rgba(20,20,25,0.98); border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px; padding: 24px; max-width: 400px; width: calc(100% - 32px);
        }
        .help-content h3 { color: #0ff; margin: 0 0 16px 0; }
        .hotkey-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 12px; }
        .hotkey-row .key { background: rgba(255,255,255,0.1); padding: 3px 8px; border-radius: 4px; font-family: monospace; font-size: 10px; }
        .hotkey-row .desc { color: rgba(255,255,255,0.6); }
        /* Sequence Mode Indicators */
        .seq-modes { display: grid; grid-template-columns: repeat(4, 1fr); gap: 4px; margin-bottom: 8px; }
        .seq-mode {
            padding: 6px 4px; font-size: 9px; font-weight: 600;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.5); border-radius: 6px; text-align: center;
            cursor: pointer; transition: all 0.15s;
        }
        .seq-mode:hover { background: rgba(139,92,246,0.15); }
        .seq-mode.active {
            background: rgba(0,255,136,0.2); border-color: #00ff88; color: #00ff88;
            box-shadow: 0 0 8px rgba(0,255,136,0.3);
        }
        /* Pattern Grid */
        .pattern-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; }
        .pattern-btn {
            padding: 6px 4px; font-size: 9px; border-radius: 6px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.7); cursor: pointer; transition: all 0.15s;
        }
        .pattern-btn:hover { background: rgba(139,92,246,0.2); border-color: rgba(139,92,246,0.5); }
        .pattern-btn.active { background: #8b5cf6; border-color: #a78bfa; color: white; }
        /* BPM Display */
        .bpm-display {
            display: flex; align-items: center; gap: 12px; padding: 8px;
            background: rgba(0,0,0,0.3); border-radius: 8px; margin-bottom: 8px;
        }
        .bpm-value { font-size: 24px; font-weight: 900; color: #00ffff; min-width: 60px; }
        .bpm-label { font-size: 10px; color: rgba(255,255,255,0.5); }
        .bar-counter {
            display: flex; gap: 2px; flex: 1;
        }
        .bar-beat {
            width: 8px; height: 16px; background: rgba(255,255,255,0.1);
            border-radius: 2px; transition: all 0.1s;
        }
        .bar-beat.active { background: #a78bfa; }
        .bar-beat.downbeat { background: #00ffff; }
        /* Trigger Pads */
        .trigger-pads { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; }
        .trigger-pad {
            padding: 12px 4px; font-size: 10px; font-weight: 700;
            background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.7); cursor: pointer; border-radius: 8px;
            transition: all 0.1s; text-align: center; user-select: none;
        }
        .trigger-pad:hover { background: rgba(139,92,246,0.2); }
        .trigger-pad:active, .trigger-pad.active {
            background: #ef4444; border-color: #f87171; color: white;
            transform: scale(0.95); box-shadow: 0 0 12px rgba(239,68,68,0.5);
        }
        /* FX Grid */
        .fx-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; }
        .fx-slider-container { text-align: center; }
        .fx-slider {
            width: 100%; height: 60px; -webkit-appearance: slider-vertical;
            writing-mode: vertical-lr; direction: rtl;
            background: transparent;
        }
        .fx-label { font-size: 9px; color: rgba(255,255,255,0.5); margin-top: 4px; }
        .fx-toggles { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 8px; }
        .fx-toggle {
            padding: 6px 10px; font-size: 9px; font-weight: 600;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.6); cursor: pointer; border-radius: 6px;
            transition: all 0.15s;
        }
        .fx-toggle:hover { background: rgba(139,92,246,0.2); }
        .fx-toggle.active { background: #8b5cf6; border-color: #a78bfa; color: white; }

        /* INTERACTIVE ENHANCEMENTS */
        /* Keyboard hints */
        .key-hint {
            font-size: 8px; color: rgba(255,255,255,0.3); font-weight: 600;
            display: block; margin-top: 2px;
        }
        /* Audio-reactive glow on mixer panel */
        #mixerPanel.pulse { box-shadow: 0 20px 60px rgba(0,0,0,0.5), 0 0 60px rgba(139,92,246,0.3); }
        /* Beat flash on BPM display */
        .bpm-value.beat { text-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff; }
        /* Trigger pad ripple effect */
        .trigger-pad.ripple::after {
            content: ''; position: absolute; inset: 0; border-radius: 8px;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            animation: ripple 0.3s ease-out; pointer-events: none;
        }
        @keyframes ripple {
            from { transform: scale(0); opacity: 1; }
            to { transform: scale(2); opacity: 0; }
        }
        .trigger-pad { position: relative; overflow: hidden; }
        /* Pattern shuffle button */
        .shuffle-btn {
            padding: 4px 10px; font-size: 9px; font-weight: 600;
            background: rgba(0,255,136,0.1); border: 1px solid rgba(0,255,136,0.3);
            color: #00ff88; cursor: pointer; border-radius: 6px; margin-left: auto;
            transition: all 0.15s;
        }
        .shuffle-btn:hover { background: rgba(0,255,136,0.2); }
        .shuffle-btn.active { background: #00ff88; color: black; animation: pulse 0.5s infinite alternate; }
        @keyframes pulse { from { opacity: 0.7; } to { opacity: 1; } }
        /* Help overlay - Responsive */
        #helpOverlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 500; background: rgba(10,10,15,0.98); backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2); border-radius: 16px;
            padding: 16px 20px; width: calc(100% - 32px); max-width: 360px; display: none;
        }
        #helpOverlay h3 { color: #00ffff; margin: 0 0 12px 0; font-size: 14px; }
        #helpOverlay .hotkey-row { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 12px; gap: 8px; }
        #helpOverlay .key { background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px; font-family: monospace; font-size: 10px; white-space: nowrap; }
        #helpOverlay .desc { color: rgba(255,255,255,0.6); text-align: right; }